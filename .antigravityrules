# Frenchify Project Rules

## Project Overview
Frenchify is a language learning platform for teaching French, with separate student and teacher workflows.

## Technology Stack
- **Frontend**: React 18 + TypeScript + Vite
- **Styling**: Tailwind CSS v4 (CSS-based config in `src/index.css`)
- **Routing**: React Router DOM v6
- **Icons**: Lucide React
- **Backend**: Firebase Functions (Node.js + TypeScript)

## Code Organization

### Directory Structure
```
frontend/
├── src/
│   ├── components/      # Reusable UI components (Button, Input, Badge, etc.)
│   ├── pages/          # Student pages (Dashboard, CoursePlayer, Profile)
│   ├── forms/          # Auth & landing pages (Login, Register, LandingPage)
│   ├── teacherPages/   # Teacher-specific pages & components
│   └── types/          # Shared TypeScript type definitions
```

### Component Architecture
- Use functional components with TypeScript
- Export component as named export: `export const ComponentName: React.FC = () => { ... }`
- Add default export for lazy-loaded route components: `export default ComponentName;`
- Use React.lazy() for route-level code splitting

## TypeScript Standards

### Type Definitions
- Use shared types from `src/types/` directory
- Import course types from `src/types/course.ts`
- Import user types from `src/types/user.ts`
- Use type-only imports: `import { type ErrorInfo } from 'react';`

### Naming Conventions
- Components: PascalCase (e.g., `CourseCard`, `EmptyState`)
- Types/Interfaces: PascalCase (e.g., `Course`, `User`)
- Props Interfaces: ComponentName + "Props" (e.g., `CourseCardProps`)
- Constants: UPPER_SNAKE_CASE (e.g., `MOCK_COURSES`)

## Component Patterns

### Reusable Components Created
- `Button` - with variants: primary, action, ghost, destructive
- `Input` - form input with label and validation styling
- `Badge` - with variants: free, pro, neutral
- `LoadingSpinner` - with sizes: sm, md, lg
- `EmptyState` - icon, title, description, optional action
- `SkeletonCard` - loading placeholder for course cards
- `ErrorBoundary` - catches React errors with fallback UI
- `PrivateRoute` - authentication guard for protected routes

### State Management
- Use `useState` for local component state
- Use `useEffect` for side effects (data fetching, subscriptions)
- Simulate async operations with setTimeout for demo purposes
- Store auth token in localStorage: `localStorage.setItem('isAuthenticated', 'true')`

## Styling Guidelines

### Tailwind CSS v4
- Custom colors defined in `src/index.css` using CSS variables
- Use utility classes for most styling
- Responsive: `sm:`, `md:`, `lg:`, `xl:` breakpoints
- Test at 375px (mobile), 768px (tablet), 1024px (desktop)

### Design Tokens
- Primary color: Blue (`bg-blue-600`, `text-blue-700`)
- Teacher variant: Indigo (`bg-indigo-600`)
- Action CTA: Emerald (`bg-emerald-500`)
- Spacing: Consistent use of `p-6`, `space-y-8`, `gap-4`
- Shadows: `shadow-sm`, `shadow-lg` for depth
- Rounded corners: `rounded-xl` for cards, `rounded-lg` for buttons

### Accessibility
- Add `aria-label` to icon-only buttons
- Use semantic HTML elements (`<nav>`, `<main>`, `<section>`)
- Ensure keyboard navigation works (Tab, Enter, Escape)
- Color contrast should meet WCAG AA standards
- Add `loading="lazy"` to images

### Visual Patterns & Motion
- **Glassmorphism**: Use `.glass-panel` or `.glass-card` for premium surfaces
- **Animations**:
  - `animate-fade-in-up`: Entry animations for text/content
  - `animate-float`: Gentle hovering for decorative elements
  - `animate-pulse-slow`: Subtle emphasis for backgrounds
  - `animate-shimmer`: Gradient text effects
- **Backgrounds**: Use subtle gradients or grid patterns (`bg-[linear-gradient...]`)
- **Depth**: Use `shadow-xl`, `backdrop-blur-lg`, and floating elements to create depth
- **Responsiveness**:
  - Complex visuals (3D/floating) should be visible on mobile (`block` not `hidden`)
  - Use `scale-[x]` and `origin-top` to fit large compositions on small screens
  - Stack layout vertically: Text top, Visuals bottom (`flex-col`)
  - Ensure sufficient padding/margins (`pb-118`) to prevent overflow clipping

## Routing

### Route Structure
- Public: `/`, `/login`, `/register`
- Student (Protected): `/dashboard`, `/course/:id`, `/profile`
- Teacher (Protected): `/teacher/dashboard`, `/teacher/course/:id/edit`, `/teacher/questions`

### Navigation
- Use `useNavigate()` hook, NOT `window.location.href`
- Wrap protected routes with `<PrivateRoute>` component
- Use `<Link>` for internal navigation
- Active route detection: Use `location.pathname` with `startsWith()` for nested routes

## Performance

### Code Splitting
- All route components are lazy-loaded with React.lazy()
- Wrap routes in `<Suspense>` with loading fallback
- Expected initial bundle reduction: 30-40%

### Image Optimization
- Use CSS gradients instead of external images where possible
- Add `loading="lazy"` attribute to images
- Specify width/height to prevent layout shift

## Error Handling
- Entire app wrapped in `<ErrorBoundary>`
- Show user-friendly error messages
- Add loading states for async operations
- Show `<EmptyState>` when no data available

## Mock Data
- Use MOCK_COURSES for dashboard/teacher data
- Include category field: 'grammar' | 'conversation'
- Simulate API calls with setTimeout (800-1000ms)

## Testing Guidelines
- Test all pages at mobile breakpoints (375px)
- Verify authentication flow (login → redirect)
- Test filter functionality (All, Grammar, Conversation)
- Check loading states appear correctly
- Verify error boundaries catch errors

## Firebase Backend (functions/)
- Use Express.js for API routes
- Type definitions in `src/types/`
- Middleware: `auth.ts` for authentication
- CORS enabled for frontend communication

## Do NOT
- ❌ Use `window.location.href` for navigation
- ❌ Import React in every file (not needed in React 18)
- ❌ Use inline styles instead of Tailwind classes
- ❌ Hardcode colors - use Tailwind utilities
- ❌ Skip error boundaries for new features
- ❌ Forget default exports for lazy-loaded components
- ❌ Use external image CDNs (e.g., pravatar.cc) - use local/gradient

## Key Files Reference
- Component library: `src/components/`
- Route components: `src/pages/`, `src/forms/`, `src/teacherPages/`
- Type definitions: `src/types/course.ts`, `src/types/user.ts`
- Styling config: `src/index.css` (Tailwind v4)
- Main app: `src/App.tsx` (with lazy loading + ErrorBoundary)
